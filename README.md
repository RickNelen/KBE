# KBE Assignment 
2020-2021

This folder contains the KBE Assignment generated by Nienke van Dam and 
Rick Nelen for the MSc course Knowledge Based Engineering.

# Required packages
This code has been verified to work on the Python 3.7.9 64 bit version. It 
is not compatible with Python 2 versions, but should work on most Python 3 
installations.

The following Python packages are required:

- os
- math

Furthermore, the following external packages are required:
- parapy; must be obtained from ParaPy directly 
- kbeutils; can be installed using pip install 
  'path to kbeutils-0.8.6-py3-none-any.whl'

# How to run the code

In order to run the code, simply go to main.py and run it. This will 
trigger the ParaPy GUI to pop up, allowing you to visualise the vehicle and 
make any adjustments you like. The root object is called PAV 'PAV' and 
contains at least the object called 'Quick PAV'. 

Depending on whether the 'iterate' input for the Iterator class is set to 
True or not, another object called 'Iterated PAV' may be displayed. 
The iterated PAV takes longer to show, but provides a more accurate design 
than the quick PAV.

If you want to adjust the input without interacting with the GUI, you can 
do so by changing the values in the .txt file called 'Client_input', found 
in the folder 'input_files'. 

Running the main.py file creates two types of output. First, a .stp file is 
created, which can be imported into a CAD system to visualise the vehicle 
and design it in more detail. Second, an invoice is provided in .pdf format,
summing up all the characteristics and prices that the client agreed with.

# Detailed folder content

The main folder (called 'KBE') contains the following files:
- main.py: provides the user an easy interaction with the code; it 
automatically follows all the steps from input via user interaction to output;
- iterator.py: provides the choice whether the user wants to iterate the 
  design in order to obtain a more detailed result or wants to quickly view 
  a non-converged design
- pdf_generator.py: creates the invoice as output, based on the resulting 
  design obtained from the run in main.py;
- kbeutils-0.8.6-py3-none-any.whl: provides the required packages for the 
  AVL analysis 

The folder 'airfoils' contains the coordinate files for several airfoils.
Note that the name of an airfoil shall be at least 6 characters long; 
otherwise the code treats it as a NACA profile.

The folder 'input files' contains the input given by the user for the 
programme. The necessary input file is called 'Client_input'. It also 
provides the file 'colour_palet.pdf', showing all the usable colours.

The folder 'output files' contains the output generated by the programme. 
This consists of a file called 'pav_assembly.stp', which can be imported 
into CAD systems, and the pdf called 'Invoice.pdf', showing the features of 
the final product and its price.

The code for the PAV itself is located in the folder 'pav_classes':
- airfoil.py contains the class Airfoil, which returns a curve based on the 
  name of the airfoil, the chord length and a thickness parameter;
- avl_configurator.py contains the class AvlAnalysis, which returns the 
  performance coefficients that are required for the aerodynamic analysis;
- functions.py contains several functions that are used in multiple classes 
  and therefore conveniently placed outside any classes; 
- fuselage.py contains the class Fuselage, which returns a surface based on 
  curves. The geometry depends on various input parameters and curves 
  defined in attributes containing the 'locations' (it might be easiest to 
  view the properties of these curves if you create splines in Matlab or 
  Python in a similar manner); 
- lifting_surface.py contains the class LiftingSurface, which returns a 
  wing-like shape defined by several curves. Each curve can be given its 
  own profile, such that the wing can be made up of various sections with 
  different shapes;
- pav.py contains the class PAV, which returns the assembly. This class 
  also contains the flight conditions. Based on these flight conditions, 
  it loads parts and overwrites the default inputs;
- propeller.py contains the class Propeller, which returns a single 
  'assembly' of propeller elements, i.e. all the blades, the hub and 
  (if applicable) the nacelle;
- skids.py contains the class Skid, which returns a skid based on 
  geometric input values;  
- wheels.py contains the classes Wheels and Rods; Wheels returns a wheel of 
  certain size, while Rods returns a compound consisting of both a vertical 
  rod and a horizontal rod.
    
